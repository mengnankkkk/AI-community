<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI虚拟播客工作室 - 专业智能播客生成平台</title>
    <meta name="description" content="基于AI技术的专业播客生成平台，支持多角色对话、情感语音合成、智能背景音乐和RAG知识库">
    <meta name="keywords" content="AI播客,语音合成,智能对话,播客制作,人工智能">

    <!-- 预加载关键资源 -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" as="style">

    <!-- 样式文件 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">

    <!-- 网站图标 -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎙️</text></svg>">
</head>
<body>
    <!-- 页面加载动画 -->
    <div class="page-loader" id="pageLoader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <h4>AI虚拟播客工作室</h4>
            <p>正在加载智能播客生成系统...</p>
        </div>
    </div>

    <!-- 主要内容 -->
    <div class="container-fluid">
        <!-- 头部导航 -->
        <nav class="navbar navbar-expand-lg navbar-dark mb-4">
            <div class="container">
                <a class="navbar-brand" href="#" onclick="scrollToTop()">
                    <i class="fas fa-microphone-alt me-2"></i>
                    AI虚拟播客工作室
                </a>
                <div class="navbar-nav ms-auto">
                    <span class="navbar-text me-3">
                        <i class="fas fa-magic me-1"></i>
                        让AI为您创造精彩播客
                    </span>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-cog"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" onclick="showHelp()"><i class="fas fa-question-circle me-2"></i>使用帮助</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showFeatures()"><i class="fas fa-star me-2"></i>功能特色</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="toggleDarkMode()"><i class="fas fa-moon me-2"></i>深色模式</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero 区域 -->
        <section class="hero-banner my-4">
            <div class="container hero-content">
                <div class="hero-copy">
                    <span class="hero-badge"><i class="fas fa-bolt"></i> 全流程 AI 播客工厂</span>
                    <h1>一键生成 <strong>沉浸式</strong> 智能播客</h1>
                    <p>从知识检索、剧本构思到情感配音与音效混音，全流程自动化，让创意无需等待。</p>
                    <div class="hero-actions">
                        <button class="btn btn-primary" onclick="scrollToForm()"><i class="fas fa-microphone-alt me-2"></i>开始创作</button>
                        <button class="btn btn-outline-light" onclick="checkKnowledgeBase()"><i class="fas fa-database me-2"></i>同步知识库</button>
                    </div>
                    <div class="hero-metrics">
                        <div class="metric-item">
                            <span class="metric-value" id="heroCompletedCount">3.2K+</span>
                            <span class="metric-label">已生成播客</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value" id="heroKnowledgeCount">0</span>
                            <span class="metric-label">知识库文档</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-value"><i class="fas fa-rocket"></i></span>
                            <span class="metric-label">异步排队极速生成</span>
                        </div>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="hero-card">
                        <div class="hero-wave"></div>
                        <div class="hero-avatar"><i class="fas fa-headphones"></i></div>
                        <div class="hero-timeline">
                            <span><i class="fas fa-pen-nib"></i> 剧本</span>
                            <span><i class="fas fa-volume-up"></i> 合成</span>
                            <span><i class="fas fa-check"></i> 完成</span>
                        </div>
                        <p class="hero-caption">实时可视化生成进度，在线审阅剧本与音频，立即下载成品播客。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 主要内容区域 -->
        <div class="container" id="formAnchor">
            <div class="row">
                <!-- 左侧：播客定制单 -->
                <div class="col-lg-8">
                    <!-- 快速开始提示 -->
                    <div class="alert alert-info alert-dismissible fade show mb-4" role="alert" id="quickStartAlert">
                        <i class="fas fa-lightbulb me-2"></i>
                        <strong>快速开始：</strong> 填写播客主题和角色信息，AI将为您生成专业的播客内容。
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <div class="card shadow slide-in-up">
                        <div class="card-header text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="card-title mb-0">
                                    <i class="fas fa-edit me-2"></i>
                                    AI虚拟播客定制单
                                </h4>
                                <div class="header-actions">
                                    <button type="button" class="btn btn-sm btn-outline-light me-2" onclick="loadTemplate()">
                                        <i class="fas fa-file-import me-1"></i>模板
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-light" onclick="resetForm()">
                                        <i class="fas fa-redo me-1"></i>重置
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="podcastForm">
                                <!-- 核心主题 -->
                                <div class="section-title">
                                    <h5><i class="fas fa-bullseye me-2"></i>核心主题</h5>
                                    <div class="tooltip-custom">
                                        <i class="fas fa-info-circle text-muted"></i>
                                        <span class="tooltip-text">选择一个有趣且有讨论价值的主题，AI会基于此生成丰富的对话内容</span>
                                    </div>
                                </div>

                                <!-- 主题建议卡片 -->
                                <div class="topic-suggestions mb-3" id="topicSuggestions" style="display: none;">
                                    <div class="d-flex flex-wrap gap-2">
                                        <span class="badge bg-light text-dark interactive-element" onclick="selectTopic('远程工作的未来趋势')">远程工作的未来趋势</span>
                                        <span class="badge bg-light text-dark interactive-element" onclick="selectTopic('人工智能对教育的影响')">人工智能对教育的影响</span>
                                        <span class="badge bg-light text-dark interactive-element" onclick="selectTopic('可持续发展与环保')">可持续发展与环保</span>
                                        <span class="badge bg-light text-dark interactive-element" onclick="selectTopic('数字化转型的挑战')">数字化转型的挑战</span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="topic" class="form-label required">播客主题</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="topic"
                                                       placeholder="例如：远程工作是未来的趋势还是短暂的泡沫？"
                                                       required onfocus="showTopicSuggestions()" onblur="hideTopicSuggestions()">
                                                <button class="btn btn-outline-primary" type="button" onclick="generateTopicSuggestion()">
                                                    <i class="fas fa-magic"></i>
                                                </button>
                                            </div>
                                            <div class="form-text">请描述您想要讨论的核心话题，或点击魔法按钮获取AI建议</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="title" class="form-label">播客标题（可选）</label>
                                            <input type="text" class="form-control" id="title"
                                                   placeholder="例如：《未来办公室：云端还是回归？》">
                                        </div>
                                    </div>
                                </div>

                                <!-- 风格与氛围 -->
                                <div class="section-title">
                                    <h5><i class="fas fa-palette me-2"></i>风格与氛围</h5>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="atmosphere" class="form-label required">讨论氛围</label>
                                            <select class="form-select" id="atmosphere" required>
                                                <option value="">请选择氛围</option>
                                                <option value="relaxed_humorous">轻松幽默</option>
                                                <option value="serious_deep">严肃深入</option>
                                                <option value="heated_debate">激烈辩论</option>
                                                <option value="warm_healing">温暖治愈</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="duration" class="form-label required">目标时长</label>
                                            <select class="form-select" id="duration" required>
                                                <option value="">请选择时长</option>
                                                <option value="5分钟">5分钟</option>
                                                <option value="8分钟">8分钟</option>
                                                <option value="10分钟">10分钟</option>
                                                <option value="12分钟">12分钟</option>
                                                <option value="15分钟">15分钟</option>
                                                <option value="20分钟">20分钟</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="languageStyle" class="form-label required">语言风格</label>
                                            <select class="form-select" id="languageStyle" required>
                                                <option value="">请选择风格</option>
                                                <option value="colloquial">口语化</option>
                                                <option value="formal">书面语</option>
                                                <option value="academic">学术化</option>
                                                <option value="internet">网络化</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- 角色设定 -->
                                <div class="section-title">
                                    <h5><i class="fas fa-users me-2"></i>角色设定</h5>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-sm btn-outline-primary" onclick="addCharacter()">
                                            <i class="fas fa-plus"></i> 添加角色
                                        </button>
                                        <button type="button" class="btn btn-sm btn-outline-success" onclick="generateCharacterSuggestion()">
                                            <i class="fas fa-robot"></i> AI建议
                                        </button>
                                    </div>
                                </div>

                                <!-- 角色数量提示 -->
                                <div class="alert alert-light border-0 py-2 mb-3" id="characterCountHint">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        当前角色数：<span id="characterCountDisplay">0</span> / 建议：2-4个角色
                                    </small>
                                </div>

                                <div id="charactersContainer">
                                    <!-- 角色将通过JavaScript动态添加 -->
                                </div>

                                <!-- 补充素材 -->
                                <div class="section-title">
                                    <h5><i class="fas fa-file-alt me-2"></i>补充素材（可选）</h5>
                                    <div class="d-flex gap-2 align-items-center">
                                        <button type="button" class="btn btn-sm btn-outline-info" onclick="toggleKnowledgeBase()">
                                            <i class="fas fa-database"></i> 知识库概览
                                        </button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="uploadFile()">
                                            <i class="fas fa-folder-open"></i> 浏览文件
                                        </button>
                                    </div>
                                </div>

                                <div class="knowledge-panel">
                                    <div class="knowledge-dropzone" id="knowledgeDropzone">
                                        <input type="file" id="knowledgeFileInput" accept=".txt,.md,.pdf,.docx,.json" multiple hidden>
                                        <div class="dropzone-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                                        <h6>拖放或点击上传知识文件</h6>
                                        <p class="text-muted small mb-2">支持 txt / md / pdf / docx / json，单次最多 10 个文件</p>
                                        <button type="button" class="btn btn-light btn-sm" onclick="uploadFile()">
                                            <i class="fas fa-plus me-1"></i>选择文件
                                        </button>
                                        <div class="upload-progress" id="knowledgeUploadStatus"></div>
                                    </div>

                                    <div class="knowledge-status-card" id="knowledgeStatus">
                                        <div class="status-row">
                                            <div class="status-icon"><i class="fas fa-database"></i></div>
                                            <div class="status-info">
                                                <span class="status-label">RAG 知识库</span>
                                                <p class="status-text mb-0">同步本地资料以增强播客内容的深度与准确性。</p>
                                            </div>
                                            <button class="btn btn-sm btn-outline-primary" onclick="checkKnowledgeBase()">
                                                <i class="fas fa-sync"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="knowledge-metrics" id="knowledgeSummary">
                                        <div class="metric-card">
                                            <span class="metric-title">文档总数</span>
                                            <span class="metric-value" data-field="documents">--</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-title">向量库大小</span>
                                            <span class="metric-value" data-field="size">--</span>
                                        </div>
                                        <div class="metric-card">
                                            <span class="metric-title">最新来源</span>
                                            <span class="metric-value" data-field="latest">--</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="backgroundMaterials" class="form-label">背景资料 / 观点文章</label>
                                    <textarea class="form-control" id="backgroundMaterials" rows="4"
                                              placeholder="粘贴参考链接、文章片段或要点列表，AI 将结合知识库深度创作"></textarea>
                                    <div class="form-text">
                                        <i class="fas fa-lightbulb text-warning me-1"></i>
                                        提供上下文让播客更加专业可信，可粘贴长文档摘要或关键论点。
                                    </div>
                                </div>

                                <!-- 提交按钮 -->
                                <div class="text-center mt-4">
                                    <button type="submit" class="btn btn-primary btn-lg pulse" id="generateBtn">
                                        <i class="fas fa-magic me-2"></i>
                                        生成播客
                                    </button>
                                    <div class="mt-2">
                                        <small class="text-muted">
                                            <i class="fas fa-clock me-1"></i>
                                            预估生成时间：2-5分钟
                                        </small>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- 右侧：生成状态和结果 -->
                <div class="col-lg-4">
                    <!-- 系统状态卡片 -->
                    <div class="card shadow bounce-in mb-4">
                        <div class="card-header text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-cogs me-2"></i>
                                    生成状态
                                </h5>
                                <div class="system-indicators">
                                    <span class="badge bg-success" id="systemStatus">
                                        <i class="fas fa-circle"></i> 在线
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="statusContainer">
                                <div class="text-center text-muted py-4">
                                    <div class="mb-3">
                                        <i class="fas fa-hand-point-left fa-2x text-primary mb-2"></i>
                                    </div>
                                    <h6 class="mb-2">准备就绪</h6>
                                    <p class="small mb-3">请填写左侧的播客定制单，然后点击"生成播客"开始制作您的专属播客！</p>
                                    <div class="quick-stats">
                                        <div class="row text-center">
                                            <div class="col-4">
                                                <div class="small text-muted">支持角色</div>
                                                <div class="fw-bold text-primary">2-6个</div>
                                            </div>
                                            <div class="col-4">
                                                <div class="small text-muted">时长范围</div>
                                                <div class="fw-bold text-success">5-20分钟</div>
                                            </div>
                                            <div class="col-4">
                                                <div class="small text-muted">音效支持</div>
                                                <div class="fw-bold text-info">9种类型</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 进度详情 -->
                            <div id="progressDetails" style="display: none;">
                                <div class="progress-steps mb-3">
                                    <div class="step" data-step="1">
                                        <i class="fas fa-file-alt"></i>
                                        <span>脚本生成</span>
                                    </div>
                                    <div class="step" data-step="2">
                                        <i class="fas fa-volume-up"></i>
                                        <span>语音合成</span>
                                    </div>
                                    <div class="step" data-step="3">
                                        <i class="fas fa-music"></i>
                                        <span>音效处理</span>
                                    </div>
                                    <div class="step" data-step="4">
                                        <i class="fas fa-check-circle"></i>
                                        <span>完成</span>
                                    </div>
                                </div>
                            </div>

                            <!-- 结果显示区域 -->
                            <div id="resultContainer" style="display: none;">
                                <hr>
                                <div class="result-tabs mb-3">
                                    <ul class="nav nav-pills nav-justified" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#scriptTab">
                                                <i class="fas fa-file-text me-1"></i>脚本
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#audioTab">
                                                <i class="fas fa-headphones me-1"></i>音频
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#infoTab">
                                                <i class="fas fa-info-circle me-1"></i>详情
                                            </button>
                                        </li>
                                    </ul>
                                </div>

                                <div class="tab-content">
                                    <div class="tab-pane fade show active" id="scriptTab">
                                        <div id="scriptPreview" class="script-preview"></div>
                                    </div>
                                    <div class="tab-pane fade" id="audioTab">
                                        <div id="audioPlayer"></div>
                                    </div>
                                    <div class="tab-pane fade" id="infoTab">
                                        <div id="podcastInfo"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 功能特色卡片 -->
                    <div class="card shadow fade-in">
                        <div class="card-header bg-gradient text-white" style="background: linear-gradient(135deg, #28a745, #20c997) !important;">
                            <h6 class="card-title mb-0">
                                <i class="fas fa-star me-2"></i>
                                功能特色
                            </h6>
                        </div>
                        <div class="card-body p-3">
                            <div class="feature-list">
                                <div class="feature-item d-flex align-items-center mb-2">
                                    <i class="fas fa-robot text-primary me-2"></i>
                                    <small>AI多角色智能对话</small>
                                </div>
                                <div class="feature-item d-flex align-items-center mb-2">
                                    <i class="fas fa-microphone text-success me-2"></i>
                                    <small>IndexTTS2情感语音合成</small>
                                </div>
                                <div class="feature-item d-flex align-items-center mb-2">
                                    <i class="fas fa-music text-info me-2"></i>
                                    <small>智能背景音乐和音效</small>
                                </div>
                                <div class="feature-item d-flex align-items-center mb-2">
                                    <i class="fas fa-database text-warning me-2"></i>
                                    <small>RAG知识库增强</small>
                                </div>
                                <div class="feature-item d-flex align-items-center">
                                    <i class="fas fa-download text-secondary me-2"></i>
                                    <small>高质量音频导出</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 浮动操作按钮 -->
    <button class="floating-action" onclick="scrollToTop()" id="scrollToTop" style="display: none;">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- 帮助模态框 -->
    <div class="modal fade" id="helpModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-question-circle me-2"></i>
                        使用帮助
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="help-content">
                        <h6><i class="fas fa-play-circle text-primary me-2"></i>快速开始</h6>
                        <ol>
                            <li>填写播客主题：选择一个有趣且有讨论价值的话题</li>
                            <li>设置讨论氛围：选择轻松幽默、严肃深入等风格</li>
                            <li>添加角色：设置2-4个不同观点的角色</li>
                            <li>点击生成：AI将自动创建精彩的播客内容</li>
                        </ol>

                        <h6 class="mt-4"><i class="fas fa-lightbulb text-success me-2"></i>使用技巧</h6>
                        <ul>
                            <li>角色设计要有明确的立场和个性差异</li>
                            <li>提供相关资料可以让讨论更加深入</li>
                            <li>选择合适的时长，建议3-5分钟最佳</li>
                            <li>可以使用知识库功能增强内容权威性</li>
                        </ul>

                        <h6 class="mt-4"><i class="fas fa-cog text-info me-2"></i>高级功能</h6>
                        <ul>
                            <li><strong>RAG知识库：</strong>上传文档或网页内容作为讨论依据</li>
                            <li><strong>音效处理：</strong>自动添加背景音乐和音效</li>
                            <li><strong>情感语音：</strong>IndexTTS2技术生成富有情感的声音</li>
                            <li><strong>多格式导出：</strong>支持MP3、WAV等多种音频格式</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 功能特色模态框 -->
    <div class="modal fade" id="featuresModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-star me-2"></i>
                        功能特色
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="feature-card p-3 border rounded">
                                <div class="feature-icon text-primary mb-2">
                                    <i class="fas fa-robot fa-2x"></i>
                                </div>
                                <h6>AI多角色对话</h6>
                                <p class="small text-muted">支持2-6个角色同时参与讨论，每个角色都有独特的个性和观点，创造真实的对话体验。</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="feature-card p-3 border rounded">
                                <div class="feature-icon text-success mb-2">
                                    <i class="fas fa-microphone fa-2x"></i>
                                </div>
                                <h6>情感语音合成</h6>
                                <p class="small text-muted">采用IndexTTS2技术，生成富有情感和个性的语音，让每个角色都有独特的声音特色。</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="feature-card p-3 border rounded">
                                <div class="feature-icon text-info mb-2">
                                    <i class="fas fa-music fa-2x"></i>
                                </div>
                                <h6>智能音效处理</h6>
                                <p class="small text-muted">自动添加背景音乐和音效，支持9种音效类型和6种氛围风格，让播客更加生动。</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="feature-card p-3 border rounded">
                                <div class="feature-icon text-warning mb-2">
                                    <i class="fas fa-database fa-2x"></i>
                                </div>
                                <h6>RAG知识库</h6>
                                <p class="small text-muted">集成LangChain+ChromaDB，支持文档、网页等多源数据，让讨论更有依据。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 图片上传模态框 -->
    <div class="modal fade" id="imageUploadModal" tabindex="-1" aria-labelledby="imageUploadModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="imageUploadModalLabel">
                        <i class="fas fa-image me-2"></i>图片分析
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="image-upload-interface">
                        <!-- 上传区域 -->
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-status mb-4" id="uploadStatus">
                                <i class="fas fa-cloud-upload-alt fa-3x text-success mb-3"></i>
                            </div>

                            <!-- 上传信息 -->
                            <div class="upload-info">
                                <h6 id="uploadTitle">准备上传图片</h6>
                                <p class="text-muted mb-3" id="uploadDescription">
                                    选择图片文件，AI将分析图片内容并生成描述
                                </p>
                            </div>

                            <!-- 图片预览 -->
                            <div class="image-preview d-none" id="imagePreview">
                                <!-- 图片预览内容将通过JavaScript动态加载 -->
                            </div>
                        </div>

                        <!-- 处理中状态 -->
                        <div class="processing-state d-none" id="processingState">
                            <div class="spinner-border text-success mb-3" role="status">
                                <span class="visually-hidden">分析中...</span>
                            </div>
                            <p class="text-muted">AI正在分析图片内容，请稍候...</p>
                        </div>

                        <!-- 分析结果 -->
                        <div class="analysis-result d-none" id="analysisResult">
                            <div class="alert alert-success">
                                <h6><i class="fas fa-check-circle me-2"></i>分析结果</h6>
                                <div class="analyzed-text" id="analyzedText"></div>
                                <div class="mt-2">
                                    <small class="text-muted">
                                        目标字段: <span id="targetFieldName"></span> |
                                        置信度: <span id="analysisConfidence"></span>%
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="d-flex justify-content-between w-100">
                        <div>
                            <!-- 上传控制按钮 -->
                            <button type="button" class="btn btn-primary me-2" id="selectImageBtn" onclick="selectImageFile()">
                                <i class="fas fa-folder-open"></i> 选择图片
                            </button>
                            <button type="button" class="btn btn-success d-none" id="analyzeImageBtn">
                                <i class="fas fa-magic"></i> 开始分析
                            </button>
                            <button type="button" class="btn btn-warning d-none" id="retryUploadBtn">
                                <i class="fas fa-redo"></i> 重新上传
                            </button>
                        </div>
                        <div>
                            <!-- 确认和取消按钮 -->
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary d-none" id="confirmAnalysisBtn">
                                <i class="fas fa-check"></i> 确认填入
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 图片分析帮助模态框 -->
    <div class="modal fade" id="imageAnalysisModal" tabindex="-1" aria-labelledby="imageAnalysisModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title" id="imageAnalysisModalLabel">
                        <i class="fas fa-question-circle me-2"></i>图片分析帮助
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6><i class="fas fa-upload me-2"></i>支持的图片格式</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-file-image text-success me-2"></i>JPG / JPEG</li>
                                <li><i class="fas fa-file-image text-success me-2"></i>PNG</li>
                                <li><i class="fas fa-file-image text-success me-2"></i>BMP</li>
                                <li><i class="fas fa-file-image text-success me-2"></i>GIF</li>
                                <li><i class="fas fa-file-image text-success me-2"></i>WebP</li>
                            </ul>

                            <h6 class="mt-4"><i class="fas fa-info-circle me-2"></i>上传要求</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>文件大小：最大10MB</li>
                                <li><i class="fas fa-check text-success me-2"></i>分辨率：建议1024x1024以下</li>
                                <li><i class="fas fa-check text-success me-2"></i>内容：清晰可见，有讨论价值</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-brain me-2"></i>分析能力</h6>
                            <div class="mb-3">
                                <h6 class="text-success">通用分析</h6>
                                <p class="text-muted small">
                                    对图片进行全面的内容描述，识别场景、人物、物品等元素
                                </p>
                            </div>
                            <div class="mb-3">
                                <h6 class="text-primary">素材分析</h6>
                                <p class="text-muted small">
                                    从播客素材角度分析图片价值，提取话题点和讨论方向
                                </p>
                            </div>
                            <div class="mb-3">
                                <h6 class="text-info">创意分析</h6>
                                <p class="text-muted small">
                                    从艺术创意角度分析图片特色，适合创意类播客内容
                                </p>
                            </div>

                            <h6 class="mt-4"><i class="fas fa-lightbulb me-2"></i>最佳实践</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-star text-warning me-2"></i>选择内容丰富的图片</li>
                                <li><i class="fas fa-star text-warning me-2"></i>避免过于模糊或暗淡</li>
                                <li><i class="fas fa-star text-warning me-2"></i>优先选择有故事性的图片</li>
                                <li><i class="fas fa-star text-warning me-2"></i>考虑图片的话题关联度</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 通知提示容器 -->
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toastContainer"></div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JavaScript -->
    <script src="voice_samples.js"></script>
    <script src="script.js?v=3.0"></script>
    <script>
        // 页面加载完成后隐藏加载动画
        window.addEventListener('load', function() {
            const loader = document.getElementById('pageLoader');
            setTimeout(() => {
                loader.classList.add('fade-out');
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 500);
            }, 800);
        });

        // 滚动监听
        window.addEventListener('scroll', function() {
            const scrollTop = document.getElementById('scrollToTop');
            if (window.pageYOffset > 300) {
                scrollTop.style.display = 'block';
            } else {
                scrollTop.style.display = 'none';
            }
        });
    </script>
</body>
</html>